---
import Section from "./ui/Section.astro";
import TitleSection from "./ui/TitleSection.astro";
import SkillCard from "./ui/SkillCard.astro";
import { skillCategories } from "@/data/skills";
const defaultCategory = "Backend";
---

<Section id="skills">
  <div class="relative w-full overflow-hidden py-16">
    <div class="relative z-10 container mx-auto px-4">
      <TitleSection title="Mis Habilidades" />

      <!-- Filtro de categorías -->
      <div class="flex flex-wrap gap-4 justify-center my-8">
        {
          skillCategories.map((category) => (
            <button
              type="button"
              class="category-button px-4 py-2 rounded-lg font-semibold transition-all"
              data-category={category.name}
              style={`background: linear-gradient(to right, var(--tw-gradient-stops));`}
            >
              {category.name}
            </button>
          ))
        }
      </div>

      <!-- Sección de habilidades -->
      <div id="skills-container" class="space-y-16 transition-all duration-500">
        {
          skillCategories.map((category, index) => (
            <div
              class={`skill-category ${category.name === defaultCategory ? "" : "hidden"} space-y-6`}
              data-category={category.name}
              data-index={index}
            >
              <h2
                class={`text-2xl md:text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r ${category.color}`}
              >
                {category.name}
              </h2>
              <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-6">
                {category.skills.map((skill, skillIndex) => (
                  <SkillCard
                    skill={skill}
                    index={skillIndex}
                    categoryColor={category.color}
                  />
                ))}
              </div>
            </div>
          ))
        }
      </div>
    </div>
  </div>
</Section>

<script is:inline>
  document.addEventListener("DOMContentLoaded", () => {
    const buttons = document.querySelectorAll(".category-button");
    const categories = document.querySelectorAll(".skill-category");

    buttons.forEach((btn) => {
      btn.addEventListener("click", () => {
        const selected = btn.getAttribute("data-category");

        categories.forEach((cat) => {
          if (cat.getAttribute("data-category") === selected) {
            cat.classList.remove("hidden");
          } else {
            cat.classList.add("hidden");
          }
        });
      });
    });
  });
</script>

<style>
  .category-button {
    background-image: linear-gradient(to right, #ccc, #eee);
    color: #111;
  }

  .category-button:hover {
    filter: brightness(1.1);
    transform: scale(1.05);
  }

  .hidden {
    display: none;
  }
</style>
